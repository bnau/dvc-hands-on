# Tracker des fichiers avec DVC

## Agenda

Durant cette étape, nous allons aborder les points suivants:

Au préalable, vous etes parvenu à [vous mettre dans la peau d'un projet Grosses Données](01.first_step.md)

## Initialisation de l'environnement de travail


DVC étant un outil basé sur Git, nous allons le configurer à minima :

```bash
git config --global user.email YOUR_EMAIL@dvc.awersome
git config --global user.name "Dvc For The Win"
```

Mettons à jour le jeu de données:

```bash
wget https://storage.googleapis.com/dvc-input-dependencies-hands-on/prerequisites/chapter02.zip 
unzip chapter02.zip
rm chapter02.zip
```

## Suivi de version des données avec DVC

Si vous chercher de l'aide sur DVC, vous pourrez vous référer à la commande suivante :

```bash
dvc help
```

Notez que les sous-commande de DVC sont proche de celle utilisé par Git.

### Init

Tout d'abord, initialisons DVC.

```bash
dvc init
```

Vous devriez obtenir un output similaire à ça :

```bash
Initialized DVC repository.

You can now commit the changes to git.

+---------------------------------------------------------------------+
|                                                                     |
|        DVC has enabled anonymous aggregate usage analytics.         |
|     Read the analytics documentation (and how to opt-out) here:     |
|             <https://dvc.org/doc/user-guide/analytics>              |
|                                                                     |
+---------------------------------------------------------------------+

What's next?
------------
- Check out the documentation: <https://dvc.org/doc>
- Get help and share ideas: <https://dvc.org/chat>
- Star us on GitHub: <https://github.com/iterative/dvc>
```

Comme pour git, nous sommes en mesure de consulter l'état de DVC:

```bash
dvc status
```

Vous devriez obtenir :

```bash
There are no data or pipelines tracked in this project yet.           
See <https://dvc.org/doc/start> to get started!
```

### Mettre sous surveillance

Ajoutons les fichiers de données et le modél sous surveillance grace à la commande `dvc add` :

```bash
dvc add data
dvc add base.h5
```

On observe les fichiers générés et le cache

```bash
git add .
git commit -m "DVC tracking"
git tag chapter01-v1
```

Votre collégue, Bob, vient de mettre à disposition un nouveau jeux de données. Nous allons les récupérer.

```bash
rm -rf data
curl https://storage.googleapis.com/dvc-input-dependencies-hands-on/data-v2.zip -o data.zip
unzip data.zip
rm data.zip
```

La commande `dvc status` devrait nous le confirmer :

```bash
data.dvc:                                                                                                                                                                                                       
        changed outs:
                modified:           data
```

Ajoutons cette nouvelle version de données dans DVC :

```bash
dvc add data
```

Vous pourrez observer que le contenu du fichier `data.dvc` est mis à jour. Créons une nouvelle version dans Git :

```bash
git add .
git commit -m "New data available"
git tag chapter01-v2
```

Checkout du tag v1, on récupère les données de la v1
```bash
git checkout chapter01-v1
dvc checkout
```

```bash
git checkout chapter01-v2
dvc checkout
```

## Next

Prochaine étape : [Stoackage distant de l'état](03.remote-storage.md)
